@using WeddingWebsite.Components.Sections
@using WeddingWebsite.Models.Gallery
@using WeddingWebsite.Models.WeddingDetails

@inject IWeddingDetails WeddingDetails

@if (!WeddingDetails.Gallery.Favourites.Any()) return;

<Section>
    <SectionHeading>Gallery</SectionHeading>
    <div style="position: relative">
        <MudCarousel TData="BigGalleryItem" ItemsSource="WeddingDetails.Gallery.Favourites" Style="@CarouselHeightCss" AutoCycle="true" ShowArrows="true" @bind-SelectedIndex="CurrentIndex">
            <ItemTemplate>
                <div class="carousel-item">
                    <img src="@context.Image.Url" alt="@context.Image.AltText"/>
                    @if (context.Title != "")
                    {
                        <p class="title carousel-overlay-text">@context.Title</p>
                    }
                    @if (context.Description != "")
                    {
                        <p class="description carousel-overlay-text">@context.Description</p>
                    }
                </div>
            </ItemTemplate>
        </MudCarousel>
        @if (CurrentItem != null)
        {
            @* <div class="carousel-item-overlay" style="@CarouselHeightCss"> *@
            @*     <p class="title carousel-overlay-text">@CurrentItem.Title</p> *@
            @*     <p class="description carousel-overlay-text">@CurrentItem.Description</p> *@
            @* </div> *@
        }
    </div>
    
</Section>

@code {
    private string CarouselHeight => WeddingDetails.Gallery.Favourites.Any() ? "600px" : "0px";
    private string CarouselHeightCss => $"height: {CarouselHeight};";
    
    private int CurrentIndex { get; set; } = 0;
    private BigGalleryItem? CurrentItem => WeddingDetails.Gallery.Favourites.ElementAtOrDefault(CurrentIndex);
}