@page "/"
@using WeddingWebsite.Client.Components
@using WeddingWebsite.Components.Containers
@using WeddingWebsite.Components.Sections
@using WeddingWebsite.Components.WeddingComponents
@using WeddingWebsite.Models.Validation
@using WeddingWebsite.Models.WebsiteConfig
@using WeddingWebsite.Models.WeddingDetails

@inject IWeddingDetails WeddingDetails
@inject IWebsiteConfig Config
@inject IWebHostEnvironment Environment
@inject IDetailsAndConfigValidator Validator

<PageTitle>Home</PageTitle>

@((MarkupString)@WeddingDetails.MainImage.GetHtml("main-image"))

<h1 class="bride-and-groom-names">@WeddingDetails.Groom.Name.First and @WeddingDetails.Bride.Name.First</h1>

<h2 class="wedding-date">@WeddingDetails.WeddingDate.DayOfWeek.ToString() @WeddingDetails.WeddingDate.ToLongDateString()</h2>

@if (Environment.IsDevelopment()) {
    <CenteredSection>
        <ValidationIssuesList Issues="@Validator.Validate(WeddingDetails, Config)" />
    </CenteredSection>
}

<CenteredSection>
    <CountdownToDate CountdownTo="@WeddingDetails.WeddingDate.ToDateTime(WeddingDetails.Events.FirstOrDefault()?.Start ?? TimeOnly.Parse("13:00"))"/>
</CenteredSection>

<div style="background-color: var(--secondary-background);">
<SectionNoPadding>
    <WeddingTimeline/>
</SectionNoPadding>
</div>

@if (Config.MeetWeddingPartyDisplay != MeetWeddingPartyDisplay.None) {
    <CenteredSection>
        <h2>Meet the Wedding Party</h2>
        <SideBySide>
            <LeftContent>
                <MeetWeddingParty 
                    People="@WeddingDetails.NotablePeople.Where(p => Config.IntroductionRolesGroom.Contains(p.Role))"
                    IsOnLeftSide="true"
                />
            </LeftContent>
            <RightContent>
                <MeetWeddingParty 
                    People="@WeddingDetails.NotablePeople.Where(p => Config.IntroductionRolesBride.Contains(p.Role))"
                    IsOnLeftSide="false"
                />
            </RightContent>
        </SideBySide>
    </CenteredSection>
}

<div style="background-color: var(--tertiary); color: white;">
<CenteredSection>
    <h2>Contact Details</h2>
    <ContactList Contacts="@WeddingDetails.Contacts"/>
</CenteredSection>

<div class="bottom-spacer"></div>

</div>

@code {

}
